<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>GenomeD3Plot Circularplot Example</title>
    <script src="d3/d3.js"></script>
    <script src="d3/d3-tip.js"></script>
    <style>
      body {
        margin: 0;
        font-size: 14px;
        font-family: "Helvetica Neue", Helvetica;
      }

      #circularchart {
        position: absolute;
        top: 0px;
        left: 125px;
      }
      path.arc {
        cursor: move;
        fill: #fff;
      }

      .node {
        font-size: 10px;
      }

      .node:hover {
        fill: #1f77b4;
      }

      .link {
        fill: none;
        stroke: #1f77b4;
        stroke-opacity: .4;
        pointer-events: none;
      }

      .link.source, .link.target {
        stroke-opacity: 1;
        stroke-width: 2px;
      }

      .node.target {
        fill: #d62728 !important;
      }

      .link.source {
        stroke: #d62728;
      }

      .node.source {
        fill: #2ca02c;
      }

      .link.target {
        stroke: #2ca02c;
      }
    </style>
    <link href="tracks.css" rel="stylesheet">
  </head>
  <body>
    <div id="plotbody">
      <!-- The container that will hold the SVG of the plot -->
      <div id="circularchart"></div>
    </div>

    <!-- Libraries needed for save feature -->
    <script type="text/javascript" src="http://bl.ocks.org/lairdm/raw/bdd7410698e06970a9ff/rgbcolor.js"></script>
    <script type="text/javascript" src="http://bl.ocks.org/lairdm/raw/bdd7410698e06970a9ff/canvg.js"></script>
    <script type="text/javascript" src="http://bl.ocks.org/lairdm/raw/bdd7410698e06970a9ff/FileSaver.js"></script>

    <!-- Circular plot library -->
    <script type="text/javascript" src="circularplot.js"></script>

    <!-- Initialization code to initialize the plot, this is what you would write
         and place in your application. -->
    <script type="text/javascript" src="circularsample.js"></script>


    <script type="text/javascript" src="d3/d3.layout.js"></script>
    <script type="text/javascript" src="d3/d3.js"></script>
    <script type="text/javascript" src="newpackage.js"></script>

    <script>
      var splines = [];

      var bundle = d3.layout.bundle();

      var line = d3.svg.line.radial()
          .interpolate("bundle")
          .tension(.85)
          .radius(function(d) { return d.y; })
          .angle(function(d) { return d.x / 180 * Math.PI; });

      var links = packages.imports(tracks[0].items);

          //splines = bundle(links);
      console.log(links);
      //console.log(splines);
      var svg = d3.select("svg");
      var path = svg.selectAll("path.link")
          .data(links)
          .enter().append("svg:path")
          .attr("class", function(d) { return "link source-" + d.source.key + " target-" + d.target.key; })
          .attr("d", function(d, i) { return line(links); });

    </script>
    <!-- Controls on the demo -->
    <div id="demo-controls">

      <div class="control-item"><button name="saveImage" onclick="saveImage(); return false">Save Image</button></div>

      <div class="control-item"><input type="button" onClick="resizePlot(); return false;" value="Resize plot diameter"></button></div>

    </div>

  <script type="text/javascript">
      // Hack to make this example display correctly in an iframe on bl.ocks.org
      d3.select(self.frameElement).style("height", "650px");
  </script>
 </body>
</html>
